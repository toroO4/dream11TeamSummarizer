<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Analysis Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-2xl font-bold text-gray-900 mb-6">AI Analysis Test</h1>
        
        <!-- Test Controls -->
        <div class="bg-white rounded-lg p-6 mb-6 shadow-sm">
            <h2 class="text-lg font-semibold mb-4">Test Enhanced AI Analysis</h2>
            <div class="space-y-4">
                <button id="test-ai-analysis" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    Test Enhanced AI Analysis
                </button>
                <button id="test-formatting" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                    Test Analysis Formatting
                </button>
            </div>
        </div>

        <!-- Test Results -->
        <div id="test-results" class="space-y-4">
            <!-- Results will be displayed here -->
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:3000';

        // Mock team data for testing
        const mockTeams = [
            {
                name: "Team Alpha",
                players: ["Virat Kohli", "Rohit Sharma", "Jasprit Bumrah", "Ravindra Jadeja", "KL Rahul", "Hardik Pandya", "Yuzvendra Chahal", "Mohammed Shami", "Rishabh Pant", "Andre Russell", "Trent Boult"],
                captain: "Virat Kohli",
                viceCaptain: "Jasprit Bumrah"
            },
            {
                name: "Team Beta",
                players: ["Rohit Sharma", "David Warner", "Jasprit Bumrah", "Rashid Khan", "Jos Buttler", "Ben Stokes", "Yuzvendra Chahal", "Kagiso Rabada", "Rishabh Pant", "Andre Russell", "Trent Boult"],
                captain: "Rohit Sharma",
                viceCaptain: "Jasprit Bumrah"
            },
            {
                name: "Team Gamma",
                players: ["Virat Kohli", "Kane Williamson", "Jasprit Bumrah", "Ravindra Jadeja", "Jos Buttler", "Hardik Pandya", "Rashid Khan", "Mohammed Shami", "Rishabh Pant", "Andre Russell", "Pat Cummins"],
                captain: "Virat Kohli",
                viceCaptain: "Ravindra Jadeja"
            }
        ];

        const mockMatchDetails = {
            teamA: "Mumbai Indians",
            teamB: "Chennai Super Kings",
            matchDate: "2024-04-15"
        };

        // Test functions
        function addResult(title, content, type = 'info') {
            const resultsDiv = document.getElementById('test-results');
            const colorClass = type === 'error' ? 'bg-red-50 border-red-200' : 
                              type === 'success' ? 'bg-green-50 border-green-200' : 
                              'bg-blue-50 border-blue-200';
            
            resultsDiv.innerHTML += `
                <div class="bg-white rounded-lg p-4 border ${colorClass} shadow-sm">
                    <h3 class="font-semibold text-gray-900 mb-2">${title}</h3>
                    <div class="text-sm text-gray-700 whitespace-pre-wrap">${content}</div>
                </div>
            `;
        }

        // Test enhanced AI analysis
        document.getElementById('test-ai-analysis').addEventListener('click', async () => {
            addResult('Enhanced AI Analysis Test', 'Testing enhanced AI analysis with detailed explanations for all teams');
            
            try {
                const analysisData = {
                    teams: mockTeams.map(team => ({
                        name: team.name,
                        players: team.players.join(', '),
                        captain: team.captain,
                        viceCaptain: team.viceCaptain
                    })),
                    teamA: mockMatchDetails.teamA,
                    teamB: mockMatchDetails.teamB,
                    matchDate: mockMatchDetails.matchDate
                };

                const response = await fetch(`${API_BASE_URL}/analyze-multiple`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(analysisData)
                });

                const result = await response.json();

                if (result.success) {
                    addResult('Enhanced AI Analysis Success', `
‚úÖ Analysis completed successfully!

üìä Analysis Details:
- Teams analyzed: ${mockTeams.length}
- Analysis format: 7 criteria per team
- Detail level: Comprehensive explanations
- Token limit: Increased to 2500 tokens

üìã Sample Analysis Structure:
${result.analysis.substring(0, 500)}...

üéØ Expected Improvements:
- Detailed explanations for each criterion
- Equal analysis depth for all teams
- Better formatting and readability
- Comprehensive insights for decision making
                    `, 'success');
                } else {
                    addResult('Enhanced AI Analysis Failed', result.message, 'error');
                }

            } catch (error) {
                addResult('Enhanced AI Analysis Error', error.message, 'error');
            }
        });

        // Test analysis formatting
        document.getElementById('test-formatting').addEventListener('click', () => {
            addResult('Analysis Formatting Test', `
‚úÖ Testing Enhanced Analysis Formatting

üé® Visual Improvements:
- Each team gets its own card
- 7 criteria displayed in grid layout
- Color-coded ratings (Green: 4-5, Yellow: 3, Red: 1-2)
- Responsive design for mobile and desktop
- Better typography and spacing

üì± Mobile Optimizations:
- Grid adapts to single column on mobile
- Touch-friendly card sizes
- Readable text sizes
- Proper spacing for mobile interaction

üîç Analysis Structure:
- Team Balance: [Rating: X/5] - detailed explanation
- Captaincy Choice: [Rating: X/5] - detailed analysis
- Match Advantage: [Rating: X/5] - detailed insights
- Venue Strategy: [Rating: X/5] - detailed strategy
- Covariance Analysis: [Rating: X/5] - detailed dependencies
- Pitch Conditions: [Rating: X/5] - detailed suitability
- Overall Rating: [Rating: X/5] - comprehensive summary

üìä Expected Output:
- All teams receive equal analysis depth
- Detailed explanations for each criterion
- Professional card-based layout
- Easy comparison between teams
            `, 'success');
        });
    </script>
</body>
</html> 